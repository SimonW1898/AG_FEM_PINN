// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/python
{
	"name": "DOLFINx + PyTorch GPU",
	"build": {
		"dockerfile": "Dockerfile",
		"context": "."
	},

	// GPU support
	"runArgs": ["--gpus=all"],

	// Features to add to the dev container. More info: https://containers.dev/features.
	// "features": {
	// 	"python": "latest",
	// 	"cuda": "12.6"
	// },

	// "settings": {
	// 	"jupyter.jupyterServerType": "local",
	// 	"jupyter.notebookFileRoot": "${workspaceFolder}",
	// 	"jupyter.notebookServer": "local"
	// },

	// Uncomment and modify these as needed
	// "forwardPorts": [],

	// Clone required dependency repository and configure git safety
	// "postCreateCommand": "git config --global --add safe.directory ${PWD} && if [ ! -d \"dolfinx-tutorial\" ]; then git clone https://github.com/jorgensd/dolfinx-tutorial.git dolfinx-tutorial && git config --global --add safe.directory ${PWD}/dolfinx-tutorial; fi",
	"postCreateCommand": "git config --global --add safe.directory ${containerWorkspaceFolder}",

	// VS Code extensions for Python/Jupyter development
	"customizations": {
		"vscode": {
			"extensions": [
				"ms-python.python",
				"ms-python.vscode-pylance",
				"ms-toolsai.jupyter",
				"ms-toolsai.jupyter-keymap",
				"ms-toolsai.jupyter-renderers",
				"ms-toolsai.vscode-jupyter-cell-tags",
				"ms-toolsai.vscode-jupyter-slideshow",
				"ms-vscode.vscode-markdown-notebook-math"
			]
		}
	}

	// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
	// "remoteUser": "root"
}
